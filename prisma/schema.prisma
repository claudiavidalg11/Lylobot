// prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Tablas del chatbot (sin campo consent para evitar tipos)
model Lead {
  id         String    @id @default(cuid())
  createdAt  DateTime  @default(now())
  name       String?
  contact    String?   @unique
  sector     String?
  goal       String?
  budget     String?
  timing     String?
  url        String?
  messages   Message[]
}

model Message {
  id         String    @id @default(cuid())
  leadId     String
  lead       Lead      @relation(fields: [leadId], references: [id], onDelete: Cascade)
  role       String    // "user" | "assistant"
  content    String
  createdAt  DateTime  @default(now())
}

  embedding Bytes    // guardamos el embedding como binario (no necesitas pgvector)
  createdAt DateTime @default(now())
}
